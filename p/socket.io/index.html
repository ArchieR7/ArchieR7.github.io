<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="這篇文章會介紹有關於 Socket.IO 在 server 端以及 iOS 端的一些實作分享。
Server 首先我們可以先從 Socket.IO 的 Get started 開始，它是以 Node.JS 所編寫的，所以先在資料夾位置執行
npm init 邊可以取得基本的一些檔案和 package.json。 接著安裝 Socket.IO 所需要的 express
npm install --save express@4.15.2 然後新建一個 index.js 的檔案，貼上
var app = require(&amp;#39;express&amp;#39;)(); var http = require(&amp;#39;http&amp;#39;).Server(app); app.get(&amp;#39;/&amp;#39;, function(req, res){ res.send(&amp;#39;&amp;lt;h1&amp;gt;Hello world&amp;lt;/h1&amp;gt;&amp;#39;); }); http.listen(3000, function(){ console.log(&amp;#39;listening on *:3000&amp;#39;); }); 這樣待會執行 node index.js 的時候便可以從 http://localhost:3000 來連上這個 server。
確認 server 目前是可以連上後，便開始安裝 Socket.IO 到其中
npm install --save socket.io 並在 index.js 裏頭加上 Socket."><title>Socket.IO</title>
<link rel=canonical href=https://www.archie.tw/p/socket.io/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Socket.IO">
<meta property="og:description" content="這篇文章會介紹有關於 Socket.IO 在 server 端以及 iOS 端的一些實作分享。
Server 首先我們可以先從 Socket.IO 的 Get started 開始，它是以 Node.JS 所編寫的，所以先在資料夾位置執行
npm init 邊可以取得基本的一些檔案和 package.json。 接著安裝 Socket.IO 所需要的 express
npm install --save express@4.15.2 然後新建一個 index.js 的檔案，貼上
var app = require(&amp;#39;express&amp;#39;)(); var http = require(&amp;#39;http&amp;#39;).Server(app); app.get(&amp;#39;/&amp;#39;, function(req, res){ res.send(&amp;#39;&amp;lt;h1&amp;gt;Hello world&amp;lt;/h1&amp;gt;&amp;#39;); }); http.listen(3000, function(){ console.log(&amp;#39;listening on *:3000&amp;#39;); }); 這樣待會執行 node index.js 的時候便可以從 http://localhost:3000 來連上這個 server。
確認 server 目前是可以連上後，便開始安裝 Socket.IO 到其中
npm install --save socket.io 並在 index.js 裏頭加上 Socket.">
<meta property="og:url" content="https://www.archie.tw/p/socket.io/">
<meta property="og:site_name" content="Archie">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2018-09-13T00:00:00+00:00"><meta property="article:modified_time" content="2018-09-13T00:00:00+00:00">
<meta name=twitter:site content="@ChangArchie">
<meta name=twitter:creator content="@ChangArchie"><meta name=twitter:title content="Socket.IO">
<meta name=twitter:description content="這篇文章會介紹有關於 Socket.IO 在 server 端以及 iOS 端的一些實作分享。
Server 首先我們可以先從 Socket.IO 的 Get started 開始，它是以 Node.JS 所編寫的，所以先在資料夾位置執行
npm init 邊可以取得基本的一些檔案和 package.json。 接著安裝 Socket.IO 所需要的 express
npm install --save express@4.15.2 然後新建一個 index.js 的檔案，貼上
var app = require(&amp;#39;express&amp;#39;)(); var http = require(&amp;#39;http&amp;#39;).Server(app); app.get(&amp;#39;/&amp;#39;, function(req, res){ res.send(&amp;#39;&amp;lt;h1&amp;gt;Hello world&amp;lt;/h1&amp;gt;&amp;#39;); }); http.listen(3000, function(){ console.log(&amp;#39;listening on *:3000&amp;#39;); }); 這樣待會執行 node index.js 的時候便可以從 http://localhost:3000 來連上這個 server。
確認 server 目前是可以連上後，便開始安裝 Socket.IO 到其中
npm install --save socket.io 並在 index.js 裏頭加上 Socket.">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-149460095-2','auto'),ga('send','pageview'))</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4467778867013569" crossorigin=anonymous></script>
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
on-phone--column extended">
<aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header class=site-info>
<figure class=site-avatar>
<img src=/img/Archie_hu1fc091553094f1283eaa3eeeb8ec0c46_37374_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>💻</span>
</figure>
<h1 class=site-name><a href=https://www.archie.tw>Archie</a></h1>
<h2 class=site-description>獨立開發者的心路歷程</h2>
</header>
<ol class=menu id=main-menu>
<li>
<a href=/ target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>首頁</span>
</a>
</li>
<li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span></span>
</li>
</ol>
</aside>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/categories/backend/>
💻 Backend
</a>
</header>
<h2 class=article-title>
<a href=/p/socket.io/>Socket.IO</a>
</h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Sep 13, 2018</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<p>這篇文章會介紹有關於 Socket.IO 在 server 端以及 iOS 端的一些實作分享。</p>
<h1 id=server>Server</h1>
<p>首先我們可以先從 Socket.IO 的 <a class=link href=https://socket.io/get-started/chat/ target=_blank rel=noopener>Get started</a> 開始，它是以 Node.JS 所編寫的，所以先在資料夾位置執行</p>
<pre tabindex=0><code>npm init
</code></pre><p>邊可以取得基本的一些檔案和 package.json。
接著安裝 Socket.IO 所需要的 express</p>
<pre tabindex=0><code>npm install --save express@4.15.2
</code></pre><p>然後新建一個 index.js 的檔案，貼上</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>)();</span>
<span class=kd>var</span> <span class=nx>http</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;http&#39;</span><span class=p>).</span><span class=nx>Server</span><span class=p>(</span><span class=nx>app</span><span class=p>);</span>
<span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>){</span>
    <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;&lt;h1&gt;Hello world&lt;/h1&gt;&#39;</span><span class=p>);</span>
<span class=p>});</span>
<span class=nx>http</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=kd>function</span><span class=p>(){</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;listening on *:3000&#39;</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div><p>這樣待會執行 node index.js 的時候便可以從 http://localhost:3000 來連上這個 server。</p>
<p>確認 server 目前是可以連上後，便開始安裝 Socket.IO 到其中</p>
<pre tabindex=0><code>npm install --save socket.io
</code></pre><p>並在 index.js 裏頭加上 Socket.IO 的 code：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=kd>var</span> <span class=nx>io</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;socket.io&#39;</span><span class=p>)(</span><span class=nx>http</span><span class=p>);</span>
<span class=nx>io</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;connection&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>socket</span><span class=p>){</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;a user connected&#39;</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div><p>這樣便完成監聽 client 連接上 server 的事件了。</p>
<p><code>connection</code> 是 socket.io 所定義的 event，而這個 event 會取得 socket 回來，所以以 function(socket) 的方式去接收並處理後續。
不過這裡的 io 可以想成是一個 server，所以每收到一個 client 的 connection 事件，都會執行 function(socket)；而我們若要監聽個別連線的事件，則是使用 socket 來處理：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;disconnect&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(){</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;user disconnected&#39;</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div><p>也就是說，像是登入、傳送訊息等，和個別使用者相關的動作，我們都是以 socket 來處理。</p>
<p>而除了監聽（on）外，發送（emit）的動作也是如此，像是我想推一段文字給特定的使用者：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;new message&#39;</span><span class=p>,</span> <span class=s1>&#39;嗨！&#39;</span><span class=p>);</span>
</code></pre></div><p>在 client 以及 server 端先彼此定義好 event 名稱，這樣就可以知道要監聽的事件為哪些。</p>
<p>什麼時候該用 io 發送，什麼時候該用 socket 呢？</p>
<p>舉個例子，我們建立一個 Socket.IO 的大聊天室，任何人只要連上這個網址，便等同於加入這個聊天室。</p>
<ul>
<li>使用者上、下線會顯示提醒</li>
<li>說髒話的人會個別收到「此訊息無法傳送」的訊息</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=nx>io</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;connection&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>socket</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>io</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;new user&#39;</span><span class=p>,</span> <span class=s1>&#39;有人加入了這個聊天室！&#39;</span><span class=p>);</span>
    <span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;add message&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>from</span><span class=p>,</span> <span class=nx>message</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=nx>message</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=s1>&#39;馬的&#39;</span><span class=p>)</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
            <span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;new message&#39;</span><span class=p>,</span> <span class=s1>&#39;此訊息無法傳送&#39;</span><span class=p>);</span>
        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
            <span class=nx>io</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;new message&#39;</span><span class=p>,</span> <span class=nx>from</span> <span class=o>+</span> <span class=s1>&#39; 說：&#39;</span> <span class=o>+</span> <span class=nx>message</span><span class=p>);</span>
        <span class=p>}</span>
    <span class=p>})</span>
    <span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;disconnect&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
        <span class=nx>io</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;user leave&#39;</span><span class=p>,</span> <span class=s1>&#39;有人離開了這個聊天室！&#39;</span><span class=p>);</span>
    <span class=p>});</span>
<span class=p>});</span>
</code></pre></div><p>上面便可以得知哪種時候應該要大家都可以接收到、而哪種是只會有個別的使用者接收到。
再來介紹一下 ack，在發送一個 event 時，可以在後面補上一個 ack，而當對方收到的時候，可以透過 ack 來傳遞 data，而非再發送一個新的 event。
有點像是 HTTP request 的概念，發送一個 request（emit），接著對方會回傳 response（ack），不過這並不一定會有，也就是說你發送（emit）了一個 event 過去，雖然有夾帶著 ack，但是對方若沒接收那個 ack 的話也是沒用。</p>
<p>這邊是一個例子，我們從 server 給沒有收過這則廣告的使用者傳送一則過去，並希望使用者真的有收到，若沒收到下次就再傳一次：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=c1>// 判斷使用者是否有收到過廣告，若沒有的話執行
</span><span class=c1></span><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;new advertise&#39;</span><span class=p>,</span> <span class=s1>&#39;恭喜您獲得 $1,000 元折扣！&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>userID</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;使用者(&#39;</span> <span class=o>+</span> <span class=nx>userID</span> <span class=o>+</span> <span class=s1>&#39;)收到廣告了！&#39;</span><span class=p>);</span>
    <span class=c1>//去資料庫更新，下次不用再推給這個 userID
</span><span class=c1></span><span class=p>)};</span>
</code></pre></div><p>其中，function(userID) 便是一個 ack 或者可以說是 callback。
相對的，收到訊息的時候，server 也可以回傳 ack 回去給 client 告知：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;add message&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>text</span><span class=p>,</span> <span class=nx>ack</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;收到: &#39;</span> <span class=o>+</span> <span class=nx>text</span><span class=p>);</span>
    <span class=nx>ack</span><span class=p>(</span><span class=err>&#39;</span><span class=nx>伺服器收到你的訊息了</span><span class=err>！</span><span class=nx>請放心</span><span class=err>！</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div><p>如此一來，便會在收到訊息之後，以 ack 的方式回傳訊息回去。
而 ack 和 emit 所發送出去有什麼不同？
在 Socket.IO 的 protocol 裏頭有定義：</p>
<ul>
<li>Packet#CONNECT ( 0 )</li>
<li>Packet#DISCONNECT ( 1 )</li>
<li>Packet#EVENT ( 2)</li>
<li>Packet#ACK ( 3 )</li>
<li>Packet#ERROR ( 4 )</li>
<li>Packet#BINARY_EVENT ( 5 )</li>
<li>Packet#BINARY_ACK ( 6 )
所以其實雖然動作類似，但 Socket.IO 可以辨別其中的差異，進而可以在 Socket 之中達到 Request、Response 的概念。</li>
</ul>
<h2 id=client>Client</h2>
<p>Client 的部分，可以使用 Socket.IO 所提供的 Swift framework，它是基於 Starscream 所開發出來的，如同上述說的有使用到 WebSocket 來連接。
以 Swift 來說：</p>
<p>let manager = SocketManager(socketURL: URL(string: &ldquo;http://localhost:3000&rdquo;)!, config: [configs])
let socket = manager.defaultSocket
這邊介紹幾個我所使用到的 configs</p>
<ul>
<li>.log(true)：開啟 LOG 的功能。</li>
<li>.forceWebsockets(true)：若沒有使用這個的話，會以 HTTP polling 的方式連接，從 header 來看的話，就會顯示 connection: keep-alive；而使用了 .forceWebsockets(true) 的話，則會使用 WebSocket 來連線，則會顯示 connection: upgrade。</li>
<li>.reconnectAttempts(int)：重新嘗試連線 n 次，超過就放棄。</li>
<li>.connectParams([String: Any])：這邊可以放 token 來做 Authentication。</li>
</ul>
<p>為什麼不在 header 裏頭加上 Authentication 的欄位？</p>
<p><a class=link href=https://socket.io/docs/client-api/#With-extraHeaders target=_blank rel=noopener>這邊 Socket.IO 有做解釋，為什麼不建議在 extraHeaders 加東西。</a></p>
<p>而 on / emit / emitWithAck 這幾個的用法就和 server 的概念一樣，這邊就不再多做解釋，</p>
<p>之後實作有遇到什麼事情再來補充（或是新文章）！</p>
</section>
<footer class=article-footer>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title></h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/p/go-%E7%9A%84%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8%E4%BD%BF%E7%94%A8/>
<div class=article-details>
<h2 class=article-title>Go 的環境變數使用</h2>
</div>
</a>
</article>
<article>
<a href=/p/%E9%BA%A5%E7%95%B6%E5%8B%9E%E5%A0%B1%E5%A0%B1-api-%E5%88%86%E6%9E%90/>
<div class=article-details>
<h2 class=article-title>麥當勞報報 API 分析</h2>
</div>
</a>
</article>
<article>
<a href=/p/%E4%BD%BF%E7%94%A8-api-%E4%BE%86%E8%AE%80%E5%8F%96-github-repository/>
<div class=article-details>
<h2 class=article-title>使用 API 來讀取 GitHub repository</h2>
</div>
</a>
</article>
<article>
<a href=/p/aws-certificate-manager-%E7%94%B3%E8%AB%8B%E6%B5%81%E7%A8%8B/>
<div class=article-details>
<h2 class=article-title>AWS Certificate Manager 申請流程</h2>
</div>
</a>
</article>
<article>
<a href=/p/aws-ec2-with-wordpress/>
<div class=article-details>
<h2 class=article-title>AWS EC2 with WordPress</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<div class=disqus-container>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//archie-1.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
<style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style>
<script>window.addEventListener('onColorSchemeChange',a=>{DISQUS&&DISQUS.reset({reload:!0})})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2017 -
2021 Archie
</section>
<section class=powerby>
<br>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>